{% extends "base.html" %}
{% block content %}
    <h2>Your Profile</h2>
    <p><strong>Username: </strong> {{user.username }}</p>
    <p><strong>Email: </strong> {{user.email }}</p>
    <p><strong>Joined: </strong> {{user.date_joined|date:"F d,Y" }}</p>

    <hr>

    <h3>Quiz Stats</h3>
    <p><strong>Total Attempts: </strong>{{ total_attempts }}</p>
    <p><strong>Average Score: </strong>{{ average_score }}%</p>

    <hr>

    <h3>Your Quiz History</h3>
    
    {% if attempts %}
        <table border="1" cellpadding="'5">
            <tr>
                <th>Quiz</th>
                <th>Score</th>
                <th>Correct</th>
                <th>Total</th>
                <th>Date</th>
                <th>Badge</th>
            </tr>
            
            {% for attempt in  attempts %}
                <tr>
                    <td>{{ attempt.quiz.title }}</td>
                    <td>{{ attempt.score }}</td>
                    <td>{{ attempt.correct_answers }}</td>
                    <td>{{ attempt.total_questions }}</td>
                    <td>{{ attempt.date_attempted|date:"M d, Y H:i" }}</td>
                    <td>{{ attempt.badge }}</td>
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>You haven't attempted any quizzes yet.</p>
    {% endif %}
    
    <hr>
    <h3>Badges</h3>
    
    {% if badges %}
        <ul>
            
            {% for badge in  badges %}
                <li><strong>{{ badge.badge.name }}</strong>: {{ badge.badge.description }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>You Havent earned any badges yet.</p>
    {% endif %}
        
{% endblock %}
